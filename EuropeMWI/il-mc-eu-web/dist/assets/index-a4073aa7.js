import{D as B,j as t,n as d,B as p,p as E,L}from"./index-473ea636.js";import{u as v,F as w}from"./FormWrapper-7b37d978.js";import{u as F,C}from"./ContainerCard-0b0b01a3.js";import{G as o,B as V,a as D}from"./ButtonSteps-68f2fe5d.js";import{g as h}from"./europe.identifiers-f1731223.js";import{a as _}from"./steps-schema-ebd653c1.js";import{T as n}from"./TextFieldController-7f5ad49a.js";import{b as f,g as r,B as j}from"./Navigation-44e5a3e6.js";import{E as b}from"./EcommerceDetails-aa4cb0cd.js";import{H as g}from"./Hidden-c0379fcc.js";import"./FormHelperText-ed336a26.js";const G=async m=>(await B.put("ecommerce/step2",m)).data,N=()=>t.jsxs(o,{children:[t.jsx(f,{identifier:"ecommerce_step2_subtitle",settings:{variant:"h4",marginBottom:3}}),t.jsx(f,{identifier:"ecommerce_step2_information",settings:{variant:"body1",marginBottom:3}})]}),T=({isLoading:m})=>{const{application:e}=d(c=>c);return t.jsx(p,{component:"div",sx:{flexGrow:1},children:t.jsxs(p,{component:"div",children:[t.jsxs(o,{container:!0,spacing:{xs:0,md:12},children:[t.jsxs(o,{item:!0,md:9,children:[t.jsx(N,{}),t.jsx(g,{mdUp:!0,children:t.jsx(o,{item:!0,md:3,style:{paddingBottom:30},children:t.jsx(b,{})})}),t.jsxs(o,{container:!0,rowSpacing:3,columnSpacing:4,children:[t.jsx(n,{attribute:"firstName",label:r("ecommerce_step2_label_firstname"),placeholder:r("ecommerce_step2_placeholder_firstname"),type:"text",defaultValue:(e==null?void 0:e.firstName)||"",disabled:e==null?void 0:e.closed,maxLength:50}),t.jsx(n,{attribute:"lastName",label:r("ecommerce_step2_label_lastname"),placeholder:r("ecommerce_step2_placeholder_lastname"),type:"text",defaultValue:(e==null?void 0:e.lastName)||"",disabled:e==null?void 0:e.closed,maxLength:50}),t.jsx(n,{attribute:"email",label:r("ecommerce_step2_label_email"),placeholder:r("ecommerce_step2_placeholder_email"),type:"text",defaultValue:(e==null?void 0:e.email)||"",disabled:e==null?void 0:e.closed,maxLength:60}),t.jsx(n,{attribute:"bin",label:r("ecommerce_step2_label_bin"),placeholder:r("ecommerce_step2_placeholder_bin"),maxLength:8,type:"text",defaultValue:(e==null?void 0:e.bin)||"",disabled:e==null?void 0:e.closed})]})]}),t.jsx(g,{mdDown:!0,children:t.jsx(o,{item:!0,md:3,style:{paddingLeft:30},children:t.jsx(b,{})})})]}),t.jsx(V,{isLoading:m,isFinished:e==null?void 0:e.closed})]})})},J=()=>{var x;const{step:m}=E(s=>s),{handleChangeStep:e}=L(),{handleFetchApplication:c}=d(),{application:S}=d(s=>s),{handleMessageError:l,handleStepError:i}=F(s=>s),u=v({mutationFn:async s=>{const a=h(),y=_.parse({...s,id:a});return await G(y)},onSuccess:async s=>{if(!s.content)return;const a=h();await c(a!=null?a:0),e(m+1),i(void 0),l(void 0)},onError:()=>{i(1),l("ecommerce_error_message_step_2")}});return t.jsxs(j,{component:"div",children:[t.jsx(D,{application:"ecommerce",completed:(x=S.closed)!=null?x:!1}),t.jsx(C,{children:t.jsx(j,{component:"div",sx:{flexGrow:1},marginBottom:4,children:t.jsx(w,{schema:_,onSubmit:u.mutateAsync,children:t.jsx(T,{isLoading:u.isLoading})})})})]})};export{J as default};
