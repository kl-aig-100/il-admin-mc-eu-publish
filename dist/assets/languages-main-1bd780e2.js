import{a as g,r as u,j as n,u as C,L as b,b as w,F as f}from"./index-1dad7262.js";import{D as x,C as L,M as S,Q as I,g as v,T as N}from"./table-wrapper-53a553d0.js";import{l as y}from"./language-e248d018.js";const k=async e=>{let t;return e.id?t=await g.put(`language/${e.id}`,e):t=await g.post("language",e),t.data},F=async e=>(await g.delete(`language/${e}`)).data,T=()=>{const[e,t]=u.useState(0),[s,o]=u.useState(!1),[i,l]=u.useState("new"),[c,r]=u.useState(!1),d=a=>{if(c){r(!1);return}t(a),o(!0),l("edit")},m=a=>{a==null||a.stopPropagation(),r(!c)};return{selectedItemId:e,show:s,setShow:o,columns:[{id:1,data:"code",label:"Code",align:"left",width:"40%"},{id:2,data:"description",label:"Name",align:"left",width:"40%"},{id:3,data:"actions",width:"20%",render:a=>n("div",{className:"d-flex align-items-center justify-content-center",children:n(x,{bodyText:`Do you want to remove the language ${a.code} - ${a.description}?`,cancelText:"No",confirmText:"Yes",data:a.id,onDelete:F,queryKey:"languages",title:"Delete Language",handleOnClick:m})})}],mode:i,setMode:l,onRowClick:(a,$)=>{d(a==null?void 0:a.id)}}},E=async e=>{const t=await g.get(`language/${e}`),{data:{content:s}}=t;return y.parse(s)},M=({selectedItemId:e,mode:t})=>{const{reset:s,setValue:o}=C(),[i,l]=u.useState(!1),c=t==="edit",r=async()=>{try{if(l(!0),s(),c){const d=await E(e);s(d)}else o("code",""),o("id",0),o("description","")}catch(d){console.error(d)}finally{l(!1)}};return u.useEffect(()=>{r()},[]),i?n(b,{minHeight:"6.3vh"}):w("div",{className:"row",children:[n(f,{label:"Code",name:"code",type:"text",col:6,placeholder:"Code",disabled:c}),n(f,{label:"Name",name:"description",type:"text",col:6,placeholder:"Name"})]})},W=()=>{const{show:e,setShow:t,selectedItemId:s,columns:o,mode:i,setMode:l,onRowClick:c}=T(),r="languages",d=()=>{t(!0),l("new")};return w("div",{className:"card-container",children:[n(L,{show:!0,children:n(S,{onSubmit:k,schema:y,modalSize:"lg",title:i==="edit"?"Edit Language":"New Language",show:e,setShow:t,queryKey:r,mode:i,icon:"bi bi-translate",submitCloseTextButton:i==="view"?void 0:"Save & Close",children:n(M,{selectedItemId:s,mode:i})})}),n(I,{queryFn:()=>v("language"),queryKey:r,children:(m,h,p)=>n(N,{title:"Language",columns:o,data:m,isLoading:p,refetch:h,icon:"bi bi-translate",actions:{new:d},row:{onRowClick:c}})})]})};export{W as default};
