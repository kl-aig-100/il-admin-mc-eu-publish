<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="cache-control" content="no-store" />
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />
    <link rel="shortcut icon" href="@Url.Content("~/Resources/Images/favicon.ico")" />
    <title>Card Benefits Home</title>
    <script src="@System.Configuration.ConfigurationManager.AppSettings["MASTERCARD_TAG_TOOL_PATH"]"></script>

    @Scripts.Render("~/Scripts/jquery-1.12.3.min.js")
    @Styles.Render("~/Scripts/datatables/datatables.min.css")
    @Styles.Render("~/Content/css/bootstrap.min.css")
    @Styles.Render("~/Content/css/custom.css")
    @Styles.Render("~/Content/css/mc-fonts.css")
    @Scripts.Render("~/Scripts/popper.min.js")
    @Scripts.Render("~/Scripts/bootstrap.min.js")
    @Scripts.Render("~/Scripts/spin.min.js")
    @Scripts.Render("~/Scripts/jquery.validate.min.js")
    @Scripts.Render("~/Scripts/jquery.metadata.js")
    @Scripts.Render("~/Scripts/jquery.numeric.js")

    @Scripts.Render("~/Scripts/moment.min.js")

    @Scripts.Render("~/Scripts/CommonValidations.js")
    @Scripts.Render("~/Scripts/json2.js")

    @Scripts.Render("~/Scripts/push-menu.js")
    @Scripts.Render("~/Scripts/CSJSRequestObject.js")
    @Scripts.Render("~/Scripts/jquery.language.switcher.js")

    @Scripts.Render("~/Scripts/Common.js")
    @Scripts.Render("~/Scripts/ILMaster.js")
    @Scripts.Render("~/Scripts/Utils.js")
    @Scripts.Render("~/Scripts/detect.min.js")
</head>
<body>
    @Html.Raw(ViewBag.language)
    @Html.Raw(ViewBag.header_html)

    @using (Html.BeginForm("Index", "", FormMethod.Post, new { id = "mainForm" }))
    {
        @Html.AntiForgeryToken()
        @Html.Raw(ViewBag.body)
    }

    @Html.Raw(ViewBag.footer_html)
    <script>
        var params = [], hash;
        var url_parts = window.location.href.split('?');
        var url_page_parts = url_parts[0].split('/');
        var DTMLanguage = url_page_parts[5];

        var hashes = url_parts[1].split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            params.push(hash[0]);
            params[hash[0]] = hash[1];
        }
        var DTMPageCode = params['code'];
        var DTMCountry = params['country'];

        var pageName = DTMPageCode;
        var language = DTMLanguage;

        var mainValidator = $('#mainForm').bind("invalid-form.validate", function () { }).validate({
            errorPlacement: function (error, element) {
                error.prependTo("#error_message");
            },
            //Below are when the validations can be fired of. This one is only being fired off when the form is submitted
            onblur: false,
            onkeyup: false,
            onsubmit: true,
            onclick: false,
            onChange: function (element) {
                $(element).valid();
            },
            onfocusout: function (element) {
                $(element).valid();
            },
            focusInvalid: true,
            errorClass: "error-msg",
            validClass: "success",
            highlight: function (element, errorClass, validClass) {

                // to highlight the div of textbox
                $(element).closest("div.form-group").addClass("input-validation-error");
            },
            unhighlight: function (element, errorClass, validClass) {
                // to unhighlight the div tag of textbox
                $(element).closest("div.form-group").removeClass("input-validation-error");
            },
            //This is grabbing all the errors and placing the errors in the div tag
            showErrors: function (errrorMap, errrorList) {
                var errorMessage = '';
                var x = 0;
                //This will fire off all the Jquery error events.
                this.defaultShowErrors();
                if (this.numberOfInvalids() != 0) {
                    setFocus();
                    $("#loading").fadeOutpageBottom
                }
            },
            errorPlacement: function (error, element) {
                if ($(element).attr('type') == 'radio' || $(element).attr('type') == 'checkbox') {
                    //will insert the error message after error span tag for radiobutton and checkbox
                    error.insertAfter($("#" + element[0].id + "-error"));
                }
                else {
                    //will insert the error message after div tag for textbox and dropdown
                    error.insertAfter(element.closest("div"));
                }
            },
        });

    </script>


</body>
</html>
<!--
@Html.Raw(ViewBag.language)
@Html.Raw(ViewBag.DebugContext)
-->
