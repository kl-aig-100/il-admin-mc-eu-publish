import{j as s,x as l,B as b,D as B,p as y,L}from"./index-473ea636.js";import{u as v,F as w}from"./FormWrapper-7b37d978.js";import{u as F,C}from"./ContainerCard-0b0b01a3.js";import{G as n,B as E,a as V}from"./ButtonSteps-68f2fe5d.js";import{g as p}from"./europe.identifiers-f1731223.js";import{T as a}from"./TextFieldController-7f5ad49a.js";import{b as h,g as r,B as _}from"./Navigation-44e5a3e6.js";import{B as f}from"./BusinessProtectionDetails-5bf4a487.js";import{H as j}from"./Hidden-c0379fcc.js";import{a as g}from"./steps-schema-83441de0.js";import"./FormHelperText-ed336a26.js";const D=()=>s.jsxs(n,{children:[s.jsx(h,{identifier:"businessProtection_step2_subtitle",settings:{variant:"h4",marginBottom:3}}),s.jsx(h,{identifier:"businessProtection_step2_information",settings:{variant:"body1",marginBottom:3}})]}),G=({isLoading:o})=>{const{application:e}=l(d=>d);return s.jsx(b,{component:"div",sx:{flexGrow:1},children:s.jsxs(b,{component:"div",children:[s.jsxs(n,{container:!0,spacing:{xs:0,md:12},children:[s.jsxs(n,{item:!0,md:9,children:[s.jsx(D,{}),s.jsx(j,{mdUp:!0,children:s.jsx(n,{item:!0,md:3,style:{paddingBottom:30},children:s.jsx(f,{})})}),s.jsxs(n,{container:!0,rowSpacing:3,columnSpacing:4,children:[s.jsx(a,{attribute:"firstName",label:r("businessProtection_step2_label_firstname"),placeholder:r("businessProtection_step2_placeholder_firstname"),type:"text",defaultValue:(e==null?void 0:e.firstName)||"",disabled:e==null?void 0:e.closed,maxLength:50}),s.jsx(a,{attribute:"lastName",label:r("businessProtection_step2_label_lastname"),placeholder:r("businessProtection_step2_placeholder_lastname"),type:"text",defaultValue:(e==null?void 0:e.lastName)||"",disabled:e==null?void 0:e.closed,maxLength:50}),s.jsx(a,{attribute:"email",label:r("businessProtection_step2_label_email"),placeholder:r("businessProtection_step2_placeholder_email"),type:"text",defaultValue:(e==null?void 0:e.email)||"",disabled:e==null?void 0:e.closed,maxLength:60}),s.jsx(a,{attribute:"bin",label:r("businessProtection_step2_label_bin"),placeholder:r("businessProtection_step2_placeholder_bin"),type:"text",maxLength:9,defaultValue:(e==null?void 0:e.bin)||"",disabled:e==null?void 0:e.closed})]})]}),s.jsx(j,{mdDown:!0,children:s.jsx(n,{item:!0,md:3,style:{paddingLeft:30},children:s.jsx(f,{})})})]}),s.jsx(E,{isLoading:o,isFinished:e==null?void 0:e.closed})]})})},N=async o=>(await B.put("businessProtection/step2",o)).data,z=()=>{var x;const{step:o}=y(t=>t),{handleChangeStep:e}=L(),{handleFetchApplication:d}=l(),{application:P}=l(t=>t),{handleMessageError:c,handleStepError:m}=F(t=>t),u=v({mutationFn:async t=>{const i=p(),S=g.parse({...t,id:i});return await N(S)},onSuccess:async t=>{if(!t.content)return;const i=p();await d(i!=null?i:0),e(o+1),m(void 0),c(void 0)},onError:()=>{m(1),c("businessProtection_error_message_step_2")}});return s.jsxs(_,{component:"div",children:[s.jsx(V,{application:"businessProtection",completed:(x=P.closed)!=null?x:!1}),s.jsx(C,{children:s.jsx(_,{component:"div",sx:{flexGrow:1},marginBottom:4,children:s.jsx(w,{schema:g,onSubmit:u.mutateAsync,children:s.jsx(G,{isLoading:u.isLoading})})})})]})};export{z as default};
